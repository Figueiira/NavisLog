{% extends "base.html" %}
{% block title %}In√≠cio - NavisLog{% endblock %}

{% block content %}

<header>
    <div class="logotipo">
        <img src="{{ url_for('static', filename='images/logotipo.png') }}" alt="Logo" />
    </div>

    <div class="nome">NavisLog</div>

    <div class="search-bar">
        <input type="search" name="search-bar" id="sb" placeholder="‚åï Pesquisar..." autocomplete="off">
    </div>

    <div class="profile" onclick="toggleProfile()" id="perfil_usuario">
        <i class="fa-solid fa-user" style="margin-top: 12px;"></i>
    </div>
</header>

<!-- Menu lateral do perfil -->
<div id="profile-menu" class="profile-menu">
    <a href="{{ url_for('configuracoes') }}">‚öôÔ∏è Configura√ß√µes</a>
    <a href="{{ url_for('profile') }}">üë§ Acessar Perfil</a>
    <a href="{{ url_for('alterar_senha') }}">üîí Alterar Senha</a>
</div>

<!-- Menu lateral -->
<div class="sidebar" id="sidebar">
    <a href="#">üè† In√≠cio</a>
    <a href="{{ url_for('operacoes') }}">üì¶ Opera√ß√µes</a>
    <a href="{{ url_for('operacoes') }}">üöö Entregas</a>
    <a href="{{ url_for('info') }}">üìä Relat√≥rios</a>
    <a href="{{ url_for('configuracoes') }}">‚öôÔ∏è Configura√ß√µes</a>
    <a href="{{ url_for('ajuda') }}">üõ†Ô∏è Suporte</a>
    <a href="{{ url_for('sobre') }}">‚ÑπÔ∏è Sobre n√≥s</a>
    <a href="{{ url_for('logout') }}">üö™ Sair</a>
</div>

<!-- Painel principal -->
<div class="main">

    <!-- Card 1 -->
    <div class="card card1" id="graficos">
        <img src="{{ url_for('static', filename='images/relatorios.jpg') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('info') }}" class="ip-button1">Acessar Gr√°ficos NavisLog</a>
    </div>

    <!-- Card 2 -->
    <div class="card card2" id="cad_embarcacao">
        <img src="{{ url_for('static', filename='images/cad navios.jpg') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('cad') }}" class="ip-button1">Cadastrar Embarca√ß√£o NavisLog</a>
    </div>


    <!-- Card 3 -->
    <div class="card card3" id="agendar_embarcacao">
         <img src="{{ url_for('static', filename='images/navio atracado.jpg') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('operacoes') }}" class="ip-button1">Agendar Atraca√ß√£o NavisLog</a>
    </div>

    <!-- Card 4 -->
    <div class="card card4" id="agendar_desatracacao">
        <img src="{{ url_for('static', filename='images/des navios.jpg') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('operacoes') }}" class="ip-button1">Agendar Desatraca√ß√£o NavisLog</a>
    </div>

    <!-- Card 5 -->
    <div class="card card5" id="controle_pedidos">
        <img src="{{ url_for('static', filename='images/funcionario.png') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('operacoes') }}" class="ip-button1">Controle de Pedidos NavisLog</a>
    </div>

    <!-- Card 6 -->
    <div class="card card6" id="controle_cargas">
         <img src="{{ url_for('static', filename='images/funcionaria.png') }}" class="card-img" style="width:340px ; height: 300px; border-radius: 12px;">
        <a href="{{ url_for('operacoes') }}" class="ip-button1">Controle de Cargas NavisLog</a>
    </div>

</div>

<script>
const barra = document.getElementById("sb");

function buscar(texto, redirecionar=false) {
    const t = texto.toLowerCase().trim();

    // Mapa das palavras ‚Üí ID do card
    const mapaIds = {
        "gr√°ficos": "graficos",
        "graficos": "graficos",

        "cadastro": "cad_embarcacao",
        "cadastrar": "cad_embarcacao",
        "embarca√ß√£o": "cad_embarcacao",
        "embarcacao": "cad_embarcacao",

        "atraca√ß√£o": "agendar_embarcacao",
        "atracacao": "agendar_embarcacao",

        "desatraca√ß√£o": "agendar_desatracacao",
        "desatracacao": "agendar_desatracacao",

        "pedidos": "controle_pedidos",
        "controle pedidos": "controle_pedidos",

        "cargas": "controle_cargas",
        "controle cargas": "controle_cargas",
        "perfil": "perfil_usuario"
    };

    // Mapa das palavras ‚Üí rotas Flask
    const mapaRotas = {
        "gr√°ficos": "{{ url_for('info') }}",
        "graficos": "{{ url_for('info') }}",

        "cadastro": "{{ url_for('cad') }}",
        "cadastrar": "{{ url_for('cad') }}",
        "embarca√ß√£o": "{{ url_for('cad') }}",
        "embarcacao": "{{ url_for('cad') }}",

        "atraca√ß√£o": "{{ url_for('operacoes') }}",
        "atracacao": "{{ url_for('operacoes') }}",

        "desatraca√ß√£o": "{{ url_for('operacoes') }}",
        "desatracacao": "{{ url_for('operacoes') }}",

        "pedidos": "{{ url_for('operacoes') }}",
        "controle pedidos": "{{ url_for('operacoes') }}",

        "cargas": "{{ url_for('operacoes') }}",
        "controle cargas": "{{ url_for('operacoes') }}",
        "perfil": "{{ url_for('profile') }}"
    };

    // Se encontrou card ‚Üí scroll
    if (mapaIds[t]) {
        const alvo = document.getElementById(mapaIds[t]);
        if (alvo) {
            alvo.scrollIntoView({ behavior: "smooth", block: "center" });
        }
    }

    // Se apertou Enter ‚Üí redireciona
    if (redirecionar && mapaRotas[t]) {
        window.location.href = mapaRotas[t];
    }
}

// Quando DIGITA ‚Üí apenas scroll
barra.addEventListener("input", function () {
    buscar(this.value, false);
});

// Quando aperta ENTER ‚Üí redireciona
barra.addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
        e.preventDefault();
        buscar(this.value, true);
    }
});





//// TESTE DO MENU DROP-DOWN////

const profileMenu = document.getElementById("profile-menu");

function toggleProfile() {
    if (profileMenu.style.right === "0px") {
        profileMenu.style.right = "-220px"; // esconde
    } else {
        profileMenu.style.right = "0px"; // mostra
    }
}

// Fecha o menu se clicar fora dele
document.addEventListener("click", function(event) {
    const isClickInside = profileMenu.contains(event.target) || event.target.closest('.profile');
    if (!isClickInside) {
        profileMenu.style.right = "-220px";
    }
});

</script>

<footer class="main-footer">
  <div class="footer-content">
    <span>Email para contato: 
        <a href="mailto:tiagocaribean@gmail.com" 
          style="color: rgb(238, 147, 11); cursor: pointer; transition: all 0.5s ease-in;">
            tiagocaribean@gmail.com
        </a>
    </span>
    <span>CNPJ: 56.216.638/0001-00</span>
    <span>Telefone: (92) 9 9999-9999</span>
  </div>
</footer>


{% endblock %}
