{% extends "base.html" %}
{% block title %}Relat√≥rios Portu√°rios - NavisLog{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<style>
    /* Centraliza o dashboard */
    .dashboard-container {
        max-width: 1200px;
        margin: 0 auto;
    }

    /* CARD PADR√ÉO */
    .card-custom {
        background: #1e3743;
        color: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        margin-bottom: 25px;
        height: 350px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    /* Cards menores de resumo */
    .summary-card {
        height: 140px;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    /* √Årea de gr√°ficos */
    .chart-area {
        height: 230px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Ajustes EXTRAS para os cards finais */
    .card-spaced {
        padding-top: 35px !important;
        padding-bottom: 30px !important;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .dashboard-title {
        font-size: 28px;
        font-weight: bold;
        text-align: center;
        cursor: pointer;
    }
</style>

<div class="dashboard-container mt-4">

    <h2 class="dashboard-title mb-4">üìä Relat√≥rios Portu√°rios - NavisLog</h2>

    <!-- =================== CARDS DE RESUMO =================== -->
    <div class="row g-4 mb-4">

        <div class="col-md-3">
            <div class="card-custom summary-card text-center">
                <h6>Navios no M√™s</h6>
                <h2 class="text-primary">42</h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card-custom summary-card text-center">
                <h6>Carga Movimentada</h6>
                <h2 class="text-success">182 mil t</h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card-custom summary-card text-center">
                <h6>Tempo M√©dio</h6>
                <h2 class="text-warning">18h</h2>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card-custom summary-card text-center">
                <h6>Ber√ßos Ocupados</h6>
                <h2 class="text-danger">67%</h2>
            </div>
        </div>

    </div>

    <!-- =================== GR√ÅFICOS =================== -->
    <div class="row g-4 mb-4">

        <div class="col-md-6">
            <div class="card-custom">
                <h5 class="text-center mb-3">Movimenta√ß√£o de Cargas</h5>
                <div class="chart-area">
                    <canvas id="graficoMovCarga"></canvas>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card-custom">
                <h5 class="text-center mb-3">Tipos de Navios</h5>
                <div class="chart-area">
                    <canvas id="graficoNavios"></canvas>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card-custom">
                <h5 class="text-center mb-3">Ocupa√ß√£o dos Ber√ßos</h5>
                <div class="chart-area">
                    <canvas id="graficoBercos"></canvas>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card-custom">
                <h5 class="text-center mb-3">Produtividade por Terminal</h5>
                <div class="chart-area">
                    <canvas id="graficoProdutividade"></canvas>
                </div>
            </div>
        </div>

    </div>

    <!-- =================== PR√ìXIMAS ATRACA√á√ïES =================== -->
    <div class="card-custom card-spaced mb-4">
        <h5 class="text-center mb-3">üìÖ Pr√≥ximas Atraca√ß√µes (ETA)</h5>

        <table class="table table-hover text-center">
            <thead>
                <tr>
                    <th>Navio</th>
                    <th>Tipo</th>
                    <th>ETA</th>
                    <th>Opera√ß√£o</th>
                    <th>Ber√ßo</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Ever Glory</td>
                    <td>Conteiner</td>
                    <td>13:40</td>
                    <td>Descarga</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>Pacific Grain</td>
                    <td>Graneleiro</td>
                    <td>16:10</td>
                    <td>Carga</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>Ocean Fuel</td>
                    <td>Petroleiro</td>
                    <td>19:00</td>
                    <td>Descarga</td>
                    <td>1</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- =================== ALERTAS =================== -->
     
    <div class="card-custom card-spaced mb-3" style="padding-bottom: 10px;">
        <h5 class="text-center mb-5 text-danger">‚ö† Alertas Operacionais</h5>

        <ul class="list-group">
            <li class="list-group-item">üî¥ Ber√ßo 2 acima de 90% de ocupa√ß√£o.</li>
            <li class="list-group-item">üü° Mar√© baixa prevista para 18h.</li>
            <li class="list-group-item">üîß Guindaste do Terminal 4 em manuten√ß√£o.</li>
        </ul>
    </div>

</div>

<!-- =============== JS GR√ÅFICOS =============== -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Movimenta√ß√£o de Cargas
    new Chart(document.getElementById("graficoMovCarga"), {
        type: "line",
        data: {
            labels: ["Jan","Fev","Mar","Abr","Mai","Jun"],
            datasets: [{
                label: "Toneladas",
                data: [20000,24000,28000,26000,31000,33000],
                borderWidth: 3
            }]
        }
    });

    // Tipos de Navios com legenda horizontal
    new Chart(document.getElementById("graficoNavios"), {
        type: "pie",
        data: {
            labels: ["Conteiner", "Graneleiro", "Petroleiro", "Carga Geral"],
            datasets: [{
                data: [18, 10, 7, 5]
            }]
        },
        options: {
            plugins: {
                legend: {
                    position: "bottom",
                    labels: {
                        padding: 15,
                        boxWidth: 18,
                        usePointStyle: true
                    }
                }
            }
        }
    });

    // Ocupa√ß√£o dos Ber√ßos
    new Chart(document.getElementById("graficoBercos"), {
        type: "bar",
        data: {
            labels: ["Ber√ßo 1","Ber√ßo 2","Ber√ßo 3","Ber√ßo 4","Ber√ßo 5"],
            datasets: [{
                label: "% Ocupa√ß√£o",
                data: [80,90,45,70,55],
                borderWidth: 1
            }]
        }
    });

    // Produtividade
    new Chart(document.getElementById("graficoProdutividade"), {
        type: "bar",
        data: {
            labels: ["Terminal 1","Terminal 2","Terminal 3","Terminal 4"],
            datasets: [{
                label: "Ton/h",
                data: [1200,900,1500,600],
                borderWidth: 1
            }]
        }
    });
</script>

{% endblock %}
